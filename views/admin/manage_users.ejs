<%-include('../partials/admin_header')%>
<style>
  .pagination {
    list-style: none;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
    padding: 0;
  }
  
  .pagination li {
    margin: 0;
  }
  
  .pagination li a {
    font-size: 12px; /* Adjust the font size as needed */
    padding: 5px 10px;
    color: white; /* Set default color to white */
  }
  
  .pagination li.active a {
    font-weight: bold;
    background-color: #f0f0f0; /* Set selected background color to lighter gray */
    color: #b9b6b6; /* Set selected text color to darker gray */
  }
  
  .pagination li:not(.active) a:hover {
    background-color: #CCCCCC; /* Set hover background color to lighter gray */
    color: #a5a3a3; /* Set hover text color to darker gray */
  }
  
  </style>
<section>
  <div class="col-md-12">
    <div class="table-responsive">
      <table class="table table-hover display mt-4">
        <thead>
          <tr>
              <div class="form-check">     
            <th scope="col">No</th>
            <th scope="col">User Name</th>
            <th scope="col">Email</th>
            <th scope="col">Status</th>
            <th scope="col" class="text-center" colspan="2">Actions</th>
              </div>
          </tr>
          <tbody>
            <% viewUsers.forEach(function(viewUsers,index){ %>
              <tr>
                <td><%= index+1  %></td>    
                <td><%= viewUsers.name %></td>
                <td><%= viewUsers.email %></td>
                <td>
                <% if (viewUsers.block == true) { %>
                 <p style="color: red;">Inactive</p> 
                <% }else { %>
                 <p style="color: green;">Active</p> 
                <% }  %>
                </td>
                <td>
                  <div class="text-center">
                    <% if (viewUsers.block == true) { %>
                    <a href="/admin/unblock_user/<%= viewUsers._id%>" class="btn btn-xs btn-success " onclick="return unblockAlert(event)"> Unblock</a>   
                     <% }else { %>
                    <a href="/admin/block_user/<%= viewUsers._id%>" class="btn btn-xs btn-success " onclick="return blockAlert(event)"> Block</a>   
                     <% }  %>
                    <a href="/admin/delete_user/<%= viewUsers._id%>" class="btn btn-xs btn-danger" onclick="return deleteAlert(event)">Remove</a>
                  </div>
                </td>
              </tr>
              <% })%>
          </tbody>
        </thead>
      </table>
    </div>
  </div>
  <hr>
  <div class="pagination-container mt-2 mb-2">
    <ul class="pagination">
      <% if (currentPage > 1) { %>
        <li class="page-item">
          <a class="page-link" href="?page=<%= currentPage - 1 %>">&laquo; Previous</a>
        </li>
      <% } %>
    
      <% for (let i = 1; i <= totalPages; i++) { %>
        <li class="page-item <% if (currentPage === i) { %> active <% } %>">
          <a class="page-link" href="?page=<%= i %>"><%= i %></a>
        </li>
      <% } %>
    
      <% if (currentPage < totalPages) { %>
        <li class="page-item">
          <a class="page-link" href="?page=<%= currentPage + 1 %>">Next &raquo;</a>
        </li>
      <% } %>
    </ul>
  </div>
</section>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>
  function deleteAlert(event) {
    event.preventDefault(); // Prevent the default link behavior
    
    // Display the SweetAlert confirmation dialog
    swal({
      title: "Are you sure?",
      text: "Do you want to remove this user?",
      icon: "warning",
      buttons: true,
      dangerMode: true,
    })
    .then((willDelete) => {
      if (willDelete) {
        // If the user confirms the deletion, proceed with the link navigation
        window.location.href = event.target.href;
      }
    });
  }
  function unblockAlert(event) {
    event.preventDefault(); // Prevent the default link behavior

    // Fetch the image URL
    // Replace `imageUrl` with the actual URL of the image
    const imageUrl = "https://example.com/path/to/product-image.jpg";

    // Display the SweetAlert question dialog
    swal({
      title: "Are you sure?",
      text: "Do you want to unblock this user?",
      icon: "warning",
      buttons: ["No", "Yes"], // Use buttons array for the question dialog
    })
    .then((isConfirmed) => {
      if (isConfirmed) {
        // If the user confirms the activation, proceed with the link navigation
        window.location.href = event.target.href;

        // Set the image source dynamically
        document.getElementById("productImage").src = imageUrl;
      }
    });
  }
  function blockAlert(event) {
    event.preventDefault(); // Prevent the default link behavior

    // Fetch the image URL
    // Replace `imageUrl` with the actual URL of the image
    const imageUrl = "https://example.com/path/to/product-image.jpg";

    // Display the SweetAlert question dialog
    swal({
      title: "Are you sure?",
      text: "Do you want to block this user?",
      icon: "warning",
      buttons: ["No", "Yes"], // Use buttons array for the question dialog
    })
    .then((isConfirmed) => {
      if (isConfirmed) {
        // If the user confirms the activation, proceed with the link navigation
        window.location.href = event.target.href;

        // Set the image source dynamically
        document.getElementById("productImage").src = imageUrl;
      }
    });
  }
</script>

<%-include('../partials/admin_footer')%>