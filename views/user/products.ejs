<%-include('../partials/user_header')%>
<style>
  /* Hide the scrollbar */
  .scroll-container::-webkit-scrollbar {
    width: 0.5em;
    background-color: white;
  }
  .scroll-container::-webkit-scrollbar-thumb {
    background-color: white;
  }
</style>
<style>
  .toast-message {
  display: inline-block;
  padding: 10px;
  border: 1px solid lightgreen;
  background-color: lightgreen;
  border-radius: 3px;
  animation: fadeOut 2s ease-in-out forwards;
}

@keyframes fadeOut {
  0% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    display: none;
  }
}

.message-text {
  font-size: 14px;
  color: white;
}

</style>
<!-- view products -->
<style>
  /* .product-item-inner {
  padding: 0;
} */
 
  .img-box {
    margin: 1;
  }

  .details {
    padding: 0;
  }
  .img-box {
    width: 100%;
    height: 0;
    padding-bottom: 100%;
    position: relative;
    overflow: hidden;
  }

  .img-box img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .product-image {
    transition: transform 0.3s ease;
    border-radius: 26%; /* Adjust the value as per your preference */

  }

  .product-image:hover {
    transform: scale(1.1);
    border-radius: 24%; /* Adjust the value as per your preference */

  }

  .cart {
    transition: transform 0.3s ease;
  }

  .go-to-cart:hover .cart {
    transform: translateY(-5px);
  }

.wishlist-icon {
    color: white;
    font-size: 24px;
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .wishlist-icon:hover {
    transform: scale(1.2);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    animation: pop-up 0.3s;
  }

  @keyframes pop-up {
    0% {
      transform: scale(1);
      opacity: 0;
    }
    100% {
      transform: scale(1.2);
      opacity: 1;
    }
  }
</style>
<% if (typeof successMessage !== 'undefined') { %>
  <div class="toast-message col-md-12 text-center">
    <span class="message-text col-md-12 text-center"><%= successMessage %></span>
  </div>  
<% } %>
<main class="wrapper">
  <section class="products pm">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <article class="title text-center">
            <p class="sub-title">
              Latest Protraits <i class="uil uil-list-ui-alt"></i><i></i>
              <hr>
              <h5 class="content-title card-title mt-3" style="color: #00000098; text-align: center;">SEARCH WITH CATEGORY</h5>

            </p>
          </article>
        </div>
      </div>
          <!-- categorize -->
          <div class="container-fluid" style="background-color: rgb(255, 255, 255); height: 200px;">
            <div class="row">
              <div class="scroll-container  mb-4" style="max-height: 200px; overflow-y: scroll;">
                <p style="color: rgba(0, 0, 0, 0.493); text-align: center;">( SIMPLIFYING THE ORDERING PROCESS FOR FINE ART )</p>
                <form action="/category_filter" method="post">
                  <% category.forEach(function(categoryName){ %>
                  <button class="col-md-2 btn btn-fill-out" style="width: 200px;height: 60px;margin-left: 13px;">
                    <input type="radio" name="<%= categoryName.categoryName %>">
                    <%= categoryName.categoryName%>
                  </button>
                  <% })%>
              </div>
            </div>
          </div>
          <hr>
          <div>
            <button type="submit" class="col-md-12 btn btn-fill-out">SEARCH</button>
          </div>
        </form>

  <!-- /categorize -->
      <div class="row">

        <!-- products-start  -->
        <% viewProducts.forEach(function(viewProduct){ %>
          <% if (viewProduct.block == false) { %>
            <div class="col-md-4 col-lg-3">
              <div class="product-item discount">
                <div class="product-item-inner">
                  <span class="discount">
                    <a
                      href="/addwishlist/<%= viewProduct._id %>"
                      class="go-to-wishlist"
                    >
                    <i class="uil uil-heart wishlist-icon"></i>
                    </a
                  ></span>
                  <figure
                    class="img-box d-flex justify-content-center align-items-center"
                  >
                    <img
                      src="/uploads/products/<%= viewProduct.image[1] %>"
                      alt="Protrait"
                      class="product-image"
                    />
                  </figure>
                  <div class="details">
                    <a href="/product_details/<%= viewProduct._id %>" class="link">
                      <span class="cat">
                        <i
                          style="color: rgb(75, 72, 72)"
                          class="uil uil-tag-alt"
                        ></i>
                        <b><%= viewProduct.productName %></b>
                      </span>
                      <h6>
                        <%= viewProduct.description.split(' ').slice(0, 7).join(' ')
                        %> ...
                      </h6>
                      <h4>â‚¹ <%= viewProduct.price %></h4>
                      <a href="/addcart/<%= viewProduct._id %>" class="go-to-cart">
                        <i class="uil uil-shopping-bag shopping-cart cart"></i>
                      </a>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          <% } %>
        <!-- products-end ./ -->
        <% })%>
        <div class="row pt-40">
          <div class="pagination justify-content-center">
              <% if (currentPage > 1) { %>
                <li class="page-item">
                  <a class="page-link" href="?page=<%= currentPage - 1 %>"><i class="uil uil-arrow-left"></i></a>
                </li>
              <% } %>
            
              <% for (let i = 1; i <= totalPages; i++) { %>
                <li class="page-item <% if (currentPage === i) { %> active <% } %>">
                  <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                </li>
              <% } %>
            
              <% if (currentPage < totalPages) { %>
                <li class="page-item">
                  <a class="page-link" href="?page=<%= currentPage + 1 %>"><i class="uil uil-arrow-right"></i></a>
                </li>
              <% } %>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<%-include('../partials/user_footer')%>
